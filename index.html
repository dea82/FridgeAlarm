<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Fridge Alarm: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Fridge Alarm
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Fridge Alarm Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>System overview</h2>
<p>Alarm system for unintentionally open fridge door</p>
<h2>Requirements</h2>
<h2>Design</h2>
<h3>Component selection</h3>
<h3>Box design</h3>
<h3>PCB</h3>
<h3>Software</h3>
<p><a href="http://dea82.github.io/FridgeAlarm">Doxygen documentation</a></p>
<h4>Doxygen deployment by Travis</h4>
<p>The source code documentation is generated with <a href="http://www.doxygen.com">Doxygen</a> and pushed automatically to GitHub Pages by <a href="http://www.travis-ci.org">Travis CI</a>.</p>
<h5>Setup</h5>
<p>This assumes that you've already figures out how to genereate Doxygen documentation and are able to build with Travis CI.</p>
<p>To be able to automatically update Doxygen documentation when a commit is done to GitHub follow these steps: </p>
<h6>Generation of SSH-key</h6>
<ol type="1">
<li>Generate a new SSH key with the following command: <code>ssh-keygen -t rsa -b 4096 -C "your_email\@example.com"</code></li>
<li>You are then prompted to enter a name for the new keypair. Enter a file in which to save the key.</li>
<li>When asked for passphrase just press ENTER for empty passphrase. Confirm with ENTER again.</li>
</ol>
<h6>Setup GitHub</h6>
<ol type="1">
<li>Navigate to your GitHub settings page <code><a href="https://github.com/">https://github.com/</a>&lt;username&gt;/&lt;your_repository&gt;/settings/keys</code> and paste the content from the public ssh-key file, the one ending with .pub. <b>Make sure to check the box that allows write access!</b></li>
</ol>
<h6>Setup Travis CI</h6>
<p>This is the trickiest part.</p>
<ol type="1">
<li>Make sure you're able to connect to Travis console.</li>
<li>Run command: <code>travis encrypt-file name-of-key-generated</code>. It's the key that doesn't end with .pub that shall be used.</li>
<li>You get an instruction from Travis CI. As it says you should now make sure to add the returned key, ending with .enc, to your repository. All others keys can and should now be removed!</li>
<li>Next update your .travis.yml with the encryption label, the 12-digit hex value returned from step 2. ``` env: global:<ul>
<li>ENCRYPTION_LABEL: "12-digit hex value" ``` TODO: Finalize <a href="https://gist.github.com/domenic/ec8b0fc8ab45f39403dd">https://gist.github.com/domenic/ec8b0fc8ab45f39403dd</a></li>
</ul>
</li>
</ol>
<h2>Verification</h2>
<h3>Install</h3>
<p>To upload the hex-file to the MCU (Attiny85) I use the following command with avrdude: <code>avrdude -B250 -cusbasp -pt85 -Uflash:w:&lt;path to hex file&gt; -Ulfuse:w:0xE2:m -Uhfuse:w:0x55:m</code> The -B250 makes it slow - however if the clock of the MCU is to slow it might not work otherwise.</p>
<h4>Fuses</h4>
<table class="doxtable">
<tr>
<th>MCU </th><th align="center">Low fuse</th><th align="center">High fuse  </th></tr>
<tr>
<td>Attiny13A</td><td align="center">? </td><td align="center">? </td></tr>
<tr>
<td>Attiny85 </td><td align="center">0xE2 </td><td align="center">0x55 </td></tr>
</table>
<h3>Power consumption</h3>
<p>The following current consumption has been observed with prototype pcb, Attiny85 and magnetic buzzer. </p>
<table class="doxtable">
<tr>
<th>System mode </th><th align="center">Current consumption [mA]  </th></tr>
<tr>
<td>Buzzer and LED ON</td><td align="center">42 </td></tr>
<tr>
<td>LED ON </td><td align="center">2.3 </td></tr>
<tr>
<td>Deep sleep </td><td align="center">0.024 </td></tr>
</table>
<h2>Conclusion</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
